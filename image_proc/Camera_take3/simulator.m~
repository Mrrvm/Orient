function [m1, m2] = simulator(N, d, R, T)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Input
%   angles  Rotation angles per axis
%   T       Translation
%   N       Number of points
%   d       distance from the camera
% Output
%   m1,m2   2D points before and after 
%            transformation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Generate random 3D points
z = peaks(N);
x = repmat(1:size(z,1),size(z,1),1);
y = x';
locs = [x(:),y(:),z(:)];
points = double(points);
M1 = locs(1:10,3);
disk = fspecial('disk',10);
disk = 0.5.*disk./max(disk(:));
imageSize = [1000,1000];
keep = locs(:,3) > 0;
locs = locs(keep,:);
locs = locs(:,1:2)./repmat(locs(:,3),1,2);
locs = round(locs);
keep = (locs(:,1) >= -size(disk,1)) & ...
    (locs(:,1) < (imageSize(2) + size(disk,1))) & ...
    (locs(:,2) >= -size(disk,2)) & ...
    (locs(:,2) < (imageSize(1) + size(disk,2)));
locs = locs(keep,:);
m1 = locs;
% Rotate points
M2 = R*M1;
% Translate points
M2 = M2+T;

%m1 = project_to_plane(M1);
%m2 = project_to_plane(M2);

end

